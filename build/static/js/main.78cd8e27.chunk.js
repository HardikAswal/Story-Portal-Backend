(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(57),s=a.n(o),l=(a(64),a(18)),i=a(6),c=a(7),d=a(9),u=a(8),m=a(12),g=a.n(m),p=a(11),h=a(1),f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=n.state,t=e.username,a=e.password;t&&a&&""!==t&&""!==a&&(n.props.addUser({username:t,password:a}),n.setState({username:"",password:""}))},n.state={},n.state.username="",n.state.password="",n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement(h.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("div",{class:"bg-gray-200"},r.a.createElement("div",{class:"container px-5 py-6 mx-auto flex items-center sm:flex-row flex-col"},r.a.createElement("a",{class:"flex title-font font-medium items-center md:justify-start justify-center text-gray-900"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-10 h-10 text-white p-2 bg-indigo-500 rounded-full",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),r.a.createElement("span",{class:"ml-3 text-xl"},"Pratilipi")),r.a.createElement("p",{class:"text-sm text-gray-500 sm:ml-6 sm:mt-0 mt-4"},"\xa9 2020 Pratilipi \u2014",r.a.createElement("a",{href:"https://twitter.com/knyttneve",rel:"noopener noreferrer",class:"text-gray-600 ml-1",target:"_blank"},"@HardikAswal")))),r.a.createElement("section",{className:"text-gray-700 body-font"},r.a.createElement("div",{className:"container px-5 py-24 mx-auto flex flex-wrap items-center"},r.a.createElement("div",{className:"lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"}),r.a.createElement("div",{className:"lg:w-2/6 md:w-1/2 bg-gray-200 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"},r.a.createElement("h2",{className:"text-gray-900 text-lg font-medium title-font mb-5"},"Sign Up"),r.a.createElement("input",{className:"bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4",onChange:function(t){return e.setState({username:t.target.value})},value:this.state.username,placeholder:"Username",type:"text"}),r.a.createElement("input",{className:"bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password,placeholder:"Password",type:"password"}),r.a.createElement("button",{className:"text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){e.handleSubmit()}},"Signup"),r.a.createElement("p",{className:"text-xs text-gray-500 mt-3"},"Already a member? ",r.a.createElement(p.b,{to:"/login"},"Login"))))))}}]),a}(r.a.Component),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleLogin=function(){var e=n.state,t=e.username,a=e.password;t&&a&&""!==t&&""!==a&&(n.props.handleLogin({username:t,password:a}),n.setState({username:"",password:""}))},n.state={},n.state.username="",n.state.password="",n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return localStorage.getItem("user")?r.a.createElement(h.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("div",{class:"bg-gray-200"},r.a.createElement("div",{class:"container px-5 py-6 mx-auto flex items-center sm:flex-row flex-col"},r.a.createElement("a",{class:"flex title-font font-medium items-center md:justify-start justify-center text-gray-900"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-10 h-10 text-white p-2 bg-indigo-500 rounded-full",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),r.a.createElement("span",{class:"ml-3 text-xl"},"Pratilipi")),r.a.createElement("p",{class:"text-sm text-gray-500 sm:ml-6 sm:mt-0 mt-4"},"\xa9 2020 Pratilipi \u2014",r.a.createElement("a",{href:"https://twitter.com/knyttneve",rel:"noopener noreferrer",class:"text-gray-600 ml-1",target:"_blank"},"@HardikAswal")))),r.a.createElement("section",{className:"text-gray-700 body-font"},r.a.createElement("div",{className:"container px-5 py-24 mx-auto flex flex-wrap items-center"},r.a.createElement("div",{className:"lg:w-3/5 md:w-1/2 md:pr-16 lg:pr-0 pr-0"}),r.a.createElement("div",{className:"lg:w-2/6 md:w-1/2 bg-gray-200 rounded-lg p-8 flex flex-col md:ml-auto w-full mt-10 md:mt-0"},r.a.createElement("h2",{className:"text-gray-900 text-lg font-medium title-font mb-5"},"Login"),r.a.createElement("input",{className:"bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4",onChange:function(t){return e.setState({username:t.target.value})},placeholder:"Username",value:this.state.username,type:"text"}),r.a.createElement("input",{className:"bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4",onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Password",value:this.state.password,type:"password"}),r.a.createElement("button",{className:"text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){e.handleLogin()}},"Login"),r.a.createElement("p",{className:"text-xs text-gray-500 mt-3"},"New here? ",r.a.createElement(p.b,{to:"/signup"},"Sign up"))))))}}]),a}(r.a.Component),b=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleStory=function(){var e=n.state,t=e.title,a=e.content,r={title:"",content:""};r.title=t,r.content=a,n.props.addStory(r)},n.state={},n.state.title="",n.state.content="",n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("section",{class:"text-gray-700 body-font relative"},r.a.createElement("div",{class:"container px-5 py-16 mx-auto"},r.a.createElement("div",{class:"flex flex-col text-center w-full mb-12"},r.a.createElement("h1",{class:"sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900"},"Add Story")),r.a.createElement("div",{class:"lg:w-1/2 md:w-2/3 mx-auto"},r.a.createElement("div",{class:"flex flex-wrap -m-2"},r.a.createElement("div",{class:"p-2 w-full"},r.a.createElement("input",{class:"w-full bg-gray-100 rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2",onChange:function(t){return e.setState({title:t.target.value})},value:this.state.title,placeholder:"Title",type:"text"})),r.a.createElement("div",{class:"p-2 w-full"},r.a.createElement("textarea",{class:"w-full bg-gray-100 rounded border border-gray-400 focus:outline-none h-48 focus:border-indigo-500 text-base px-4 py-2 resize-none block",onChange:function(t){return e.setState({content:t.target.value})},value:this.state.content,placeholder:"Content"})),r.a.createElement("div",{class:"p-2 w-full"},r.a.createElement("button",{class:"flex mx-auto text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(t){e.handleStory(),e.setState({title:"",content:""})}},"Add")))))))}}]),a}(r.a.Component),v=a(16);var w=function(e){var t=Object(v.a)(localStorage.getItem("user"));return r.a.createElement("div",null,r.a.createElement("header",{class:"text-gray-700 body-font"},r.a.createElement("div",{class:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center"},r.a.createElement("nav",{class:"flex lg:w-2/5 flex-wrap items-center text-base md:ml-auto"},r.a.createElement("a",{class:"mr-5 hover:text-gray-900"},"First Link"),r.a.createElement("a",{class:"mr-5 hover:text-gray-900"},"Second Link"),r.a.createElement("a",{class:"mr-5 hover:text-gray-900"},"Third Link"),r.a.createElement("a",{class:"hover:text-gray-900"},"Fourth Link")),r.a.createElement("a",{class:"flex order-first lg:order-none lg:w-1/5 title-font font-medium items-center text-gray-900 lg:items-center lg:justify-center mb-4 md:mb-0"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-10 h-10 text-white p-2 bg-indigo-500 rounded-full",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})),r.a.createElement("span",{class:"ml-3 text-xl"},"Pratilipi")),r.a.createElement("div",{class:"lg:w-2/5 inline-flex lg:justify-end ml-5 lg:ml-0"},r.a.createElement("button",{disabled:!0,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l"},t.username),r.a.createElement("button",{class:"inline-flex items-center bg-gray-200 border-0 py-1 px-3 focus:outline-none hover:bg-gray-300 rounded text-base mt-4 md:mt-0",onClick:e.logout},"Logout",r.a.createElement("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-4 h-4 ml-1",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M5 12h14M12 5l7 7-7 7"})))))))},y=a(29),E=a.n(y),k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.state.liveUsers="",n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;if(localStorage.getItem("user")){var t=Object(v.a)(localStorage.getItem("user"));return console.log(t),r.a.createElement("div",null,r.a.createElement(w,{logout:this.props.logout}),r.a.createElement(b,{addStory:this.props.addStory,stories:this.props.stories}),r.a.createElement("section",{class:"text-gray-700 body-font overflow-hidden"},r.a.createElement("div",{class:"container px-5 py-24 mx-auto"},r.a.createElement("div",{class:"-my-8"},this.props.stories.map((function(a,n){return r.a.createElement("div",{class:"py-8 flex flex-wrap md:flex-no-wrap",key:n},r.a.createElement("div",{class:"md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col"},r.a.createElement("span",{class:"tracking-widest font-medium title-font text-gray-900"},n+1),r.a.createElement("span",{class:"mt-1 text-gray-500 text-sm"},a.date)),r.a.createElement("div",{class:"md:flex-grow"},r.a.createElement("h2",{class:"text-2xl font-medium text-gray-900 title-font mb-2"},a.title),r.a.createElement("p",{class:"leading-relaxed"},a.content.substring(0,120),"..."),r.a.createElement(p.b,{to:"/story",onClick:function(n){e.props.showStory({x:a,decoded:t})},class:"text-indigo-500 inline-flex items-center mt-4"},"Read More",r.a.createElement("svg",{class:"w-4 h-4 ml-2",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},r.a.createElement("path",{d:"M5 12h14"}),r.a.createElement("path",{d:"M12 5l7 7-7 7"}))),r.a.createElement("hr",{style:{borderWidth:"2px"}})))}))))))}return r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.state.isAuthenticated=e.isAuthenticated,n.state.liveUsers="",n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;E()("http://localhost:5000").on("counter",(function(t){e.setState({liveUsers:t.count})}))}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("story"));if(localStorage.getItem("user")){var t=Object(v.a)(localStorage.getItem("user"));return console.log(t),r.a.createElement("div",null,r.a.createElement(w,{logout:this.props.logout}),r.a.createElement(p.b,{to:"/profile"},r.a.createElement("button",{class:"flex ml-10 mt-10 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg"},"Go Back")),r.a.createElement("section",{class:"text-gray-700 body-font"},r.a.createElement("div",{class:"container px-5 py-5 mx-auto"},r.a.createElement("div",{class:"flex flex-col text-center w-full mb-20"},r.a.createElement("h2",{class:"text-s text-indigo-500 tracking-widest font-medium title-font mb-1"},r.a.createElement("svg",{fill:"none",style:{display:"inline",backgroundColor:"#e8e8e8",borderRadius:"50%",margin:"5px",padding:"5px"},stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-8 h-8",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),r.a.createElement("circle",{cx:"12",cy:"7",r:"4"}))," ",e.totalViews.length,r.a.createElement("span",{style:{marginLeft:"10px",marginRight:"10px"}}," "),r.a.createElement("svg",{fill:"none",style:{display:"inline",backgroundColor:"#e8e8e8",borderRadius:"50%",margin:"5px",padding:"5px"},stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"w-8 h-8",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}))," ",this.state.liveUsers),r.a.createElement("h1",{class:"sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900"},e.title),r.a.createElement("p",{class:"lg:w-2/3 mx-auto leading-relaxed text-base"},e.content)))))}return r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),j=(a(117),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleLogin=function(e){console.log("Inside Handle login");var t={username:e.username,password:e.password};if(!t.username||!t.password)return console.log("Invalid");g.a.post("/api/users/login",t).then((function(e){return console.log(e.data),e.headers["x-auth-token"]&&(console.log(e.headers["x-auth-token"]),localStorage.setItem("user",JSON.stringify(e.headers)),n.setState({isAuthenticated:!0})),e.data})).catch((function(e){return window.alert("Invalid ID or Password.")})),n.setState({username:"",password:""})},n.logout=function(e){console.log("Logging out..."),localStorage.removeItem("user"),window.location.reload(),n.setState({isAuthenticated:!1})},n.addStory=function(e){console.log(e);var t=n.state.stories;t.push(e),g.a.post("/api/stories",e).then((function(e){400===e.status&&alert("Title already exists."),200===e.status&&(window.location.href=window.location.href,n.setState({stories:t}))})).catch((function(e){console.log(e)}))},n.showStory=function(e){var t=n.state.stories,a=e.x,r=e.decoded;console.log(a),console.log(r);var o=a;console.log(o._id),o.totalViews.includes(r.id)||(o.totalViews.push(r.id),console.log(o),g.a.put("/api/stories/".concat(o._id),o).then((function(e){n.setState({stories:t})})).catch((function(e){console.log(e)}))),localStorage.setItem("story",JSON.stringify(a))},n.state={},n.state.user=[],n.state.isAuthenticated=!1,n.state.stories=[],n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/users").then((function(t){var a=t.data;e.setState({user:a})})),g.a.get("/api/stories").then((function(t){var a=t.data;e.setState({stories:a})}))}},{key:"addUser",value:function(e){var t=this;console.log(e);var a=this.state.user;a.push(e),console.log(a),g.a.post("/api/users/register",e).then((function(e){400===e.status&&alert("Username already exists."),200===e.status&&t.setState({user:a,isAuthenticated:!0})})).catch((function(e){window.alert("Username must be atleast 3 characters long\nPassword must be atleast 15 characters long."),console.log(e)})),console.log(this.state.user)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{path:"/",exact:!0},r.a.createElement(h.a,{to:"/login"})),r.a.createElement(h.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(f,{isAuthenticated:e.state.isAuthenticated,user:e.state.user,addUser:e.addUser.bind(e)})}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(){var t;return r.a.createElement(x,(t={isAuthenticated:e.state.isAuthenticated,handleLogin:e.handleLogin.bind(e)},Object(l.a)(t,"isAuthenticated",e.state.isAuthenticated),Object(l.a)(t,"user",e.state.user),t))}}),r.a.createElement(h.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(k,{showStory:e.showStory.bind(e),stories:e.state.stories,addStory:e.addStory.bind(e),logout:e.logout.bind(e),isAuthenticated:e.state.isAuthenticated,user:e.state.user,addUser:e.addUser.bind(e)})}}),r.a.createElement(h.b,{exact:!0,path:"/story",render:function(){var t;return r.a.createElement(S,(t={logout:e.logout.bind(e),isAuthenticated:e.state.isAuthenticated,storyPanel:e.state.storyPanel,showProduct:e.showStory.bind(e),stories:e.state.stories},Object(l.a)(t,"isAuthenticated",e.state.isAuthenticated),Object(l.a)(t,"user",e.state.user),t))}}))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,null," ",r.a.createElement(j,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports=a(118)},64:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.78cd8e27.chunk.js.map